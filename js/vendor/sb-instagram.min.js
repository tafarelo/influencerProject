"use strict";
var $sbi_photo;
function sbi_init(){jQuery("#sb_instagram.sbi").each(function(){var a=jQuery(this),b=a.find("#sbi_images"),c=a.find("#sbi_load .sbi_load_btn"),d="standard_resolution",e=parseInt(this.getAttribute("data-cols"),10),f=this.getAttribute("data-num"),g=JSON.parse(this.getAttribute("data-options")),h="user",i="none",j=this.getAttribute("data-id"),f=this.getAttribute("data-num"),l="",m=[];switch(""!==g.sortby&&(i=g.sortby),this.getAttribute("data-res")){case"auto":var n=a.innerWidth(),o=a.innerWidth()/e,p=jQuery(window).width();p<640&&(n<640&&a.is(".sbi_col_3, .sbi_col_4, .sbi_col_5, .sbi_col_6")&&(o=300),n<640&&a.is(".sbi_col_7, .sbi_col_8, .sbi_col_9, .sbi_col_10")&&(o=100),n>320&&n<480&&p<480&&(o=480),n<320&&p<480&&(o=300)),d=o<150?"thumbnail":o<320?"low_resolution":"standard_resolution",n<=100&&(d="low_resolution");break;case"thumb":d="thumbnail";break;case"medium":d="low_resolution";break;default:d="standard_resolution"}var q=j.replace(/ /g,"").split(","),r=q,s="",t="https://api.instagram.com/v1/users/"+q[0]+"?access_token="+sb_instagram_js_options.sb_instagram_at;g.headercolor.length&&(s='style="color: #'+g.headercolor+'"'),jQuery.ajax({method:"GET",url:t,dataType:"jsonp",success:function(b){l='<a href="http://instagram.com/'+b.data.username+'" target="_blank" title="@'+b.data.username+'" class="sbi_header_link">',l+='<div class="sbi_header_text">',l+="<h3 "+s,0==b.data.bio.length&&(l+=' class="sbi_no_bio"'),l+=">@"+b.data.username+"</h3>",b.data.bio.length&&(l+='<p class="sbi_bio" '+s+">"+b.data.bio+"</p>"),l+="</div>",l+='<div class="sbi_header_img">',l+='<div class="sbi_header_img_hover"><i></i></div>',l+='<img src="'+b.data.profile_picture+'" alt="'+b.data.full_name+'" width="50" height="50">',l+="</div>",l+="</a>",a.find(".sb_instagram_header").prepend(l),a.find(".sbi_follow_btn").length&&a.find(".sbi_follow_btn a").attr("href","http://instagram.com/"+b.data.username)}}),jQuery.each(r,function(j,k){var l=new instagramfeed({target:b,get:h,sortBy:i,resolution:d,limit:parseInt(f,10),template:'<div class="sbi_item sbi_type_{{model.type}} sbi_new" id="sbi_{{id}}" data-date="{{model.created_time_raw}}"><div class="sbi_photo_wrap"><a class="sbi_photo" href="{{link}}" target="_blank"><img src="{{image}}" alt="{{caption}}" width="200" height="200" /></a></div></div>',filter:function(a){var b=new Date(1e3*a.created_time),c=b.getTime();return a.created_time_raw=c,null!=a.caption&&(a.caption.text=a.caption.text.replace(/[^a-zA-Z ]/g,"")),a.images.thumbnail.url=a.images.thumbnail.url.split("?ig_cache_key")[0],a.images.standard_resolution.url=a.images.standard_resolution.url.split("?ig_cache_key")[0],a.images.low_resolution.url=a.images.low_resolution.url.split("?ig_cache_key")[0],!0},userId:parseInt(k,10),accessToken:sb_instagram_js_options.sb_instagram_at,after:function(){function h(){if("thumbnail"!==d){var b=a.find(".sbi_photo").eq(0).innerWidth(),c=parseInt(e,10);if(!a.hasClass("sbi_disable_mobile")){var f=jQuery(window).width();f<640&&parseInt(e,10)>2&&parseInt(e,10)<7&&(c=2),f<640&&parseInt(e,10)>6&&parseInt(e,10)<11&&(c=4),f<=480&&parseInt(e,10)>2&&(c=1)}var h=a.find("#sbi_images").width()/c-2*g.imagepadding;b<=h&&(b=h),a.find(".sbi_photo").css("height",b)}}function j(){a.removeClass("sbi_small sbi_medium");var b=a.find(".sbi_item").innerWidth();b>120&&b<240?a.addClass("sbi_medium"):b<=120&&a.addClass("sbi_small")}if(a.find(".sbi_loader").remove(),this.hasNext()&&m.push("1"),m.length>0?c.show():(c.hide(),a.css("padding-bottom",0)),"function"==typeof sbi_custom_js&&setTimeout(function(){sbi_custom_js()},100),"thumbnail"!==d){var b=b||{VER:"0.9.944"};b.bgs_Available=!1,b.bgs_CheckRunned=!1,function(a){function c(){if(!b.bgs_CheckRunned){b.bgs_CheckRunned=!0;var c=a('<span style="background-size:cover" />');a("body").append(c),!function(){var a=c[0];if(a&&window.getComputedStyle){var d=window.getComputedStyle(a,null);d&&d.backgroundSize&&(b.bgs_Available="cover"===d.backgroundSize)}}(),c.remove()}}a.fn.extend({sbi_imgLiquid:function(d){this.defaults={fill:!0,verticalAlign:"center",horizontalAlign:"center",useBackgroundSize:!0,useDataHtmlAttr:!0,responsive:!0,delay:0,fadeInTime:0,removeBoxBackground:!0,hardPixels:!0,responsiveCheckTime:500,timecheckvisibility:500,onStart:null,onFinish:null,onItemStart:null,onItemFinish:null,onItemError:null},c();var e=this;return this.options=d,this.settings=a.extend({},this.defaults,this.options),this.settings.onStart&&this.settings.onStart(),this.each(function(c){function d(){-1===m.css("background-image").indexOf(encodeURI(n.attr("src")))&&m.css({"background-image":'url("'+encodeURI(n.attr("src"))+'")'}),m.css({"background-size":l.fill?"cover":"contain","background-position":(l.horizontalAlign+" "+l.verticalAlign).toLowerCase(),"background-repeat":"no-repeat"}),a("a:first",m).css({display:"block",width:"100%",height:"100%"}),a("img",m).css({display:"none"}),l.onItemFinish&&l.onItemFinish(c,m,n),m.addClass("sbi_imgLiquid_bgSize"),m.addClass("sbi_imgLiquid_ready"),k()}function f(){function b(){n.data("sbi_imgLiquid_error")||n.data("sbi_imgLiquid_loaded")||n.data("sbi_imgLiquid_oldProcessed")||(m.is(":visible")&&n[0].complete&&n[0].width>0&&n[0].height>0?(n.data("sbi_imgLiquid_loaded",!0),setTimeout(j,c*l.delay)):setTimeout(b,l.timecheckvisibility))}if(n.data("oldSrc")&&n.data("oldSrc")!==n.attr("src")){var d=n.clone().removeAttr("style");return d.data("sbi_imgLiquid_settings",n.data("sbi_imgLiquid_settings")),n.parent().prepend(d),n.remove(),n=d,n[0].width=0,void setTimeout(f,10)}return n.data("sbi_imgLiquid_oldProcessed")?void j():(n.data("sbi_imgLiquid_oldProcessed",!1),n.data("oldSrc",n.attr("src")),a("img:not(:first)",m).css("display","none"),m.css({overflow:"hidden"}),n.fadeTo(0,0).removeAttr("width").removeAttr("height").css({visibility:"visible","max-width":"none","max-height":"none",width:"auto",height:"auto",display:"block"}),n.on("error",h),n[0].onerror=h,b(),void g())}function g(){(l.responsive||n.data("sbi_imgLiquid_oldProcessed"))&&n.data("sbi_imgLiquid_settings")&&(l=n.data("sbi_imgLiquid_settings"),m.actualSize=m.get(0).offsetWidth+m.get(0).offsetHeight/1e4,m.sizeOld&&m.actualSize!==m.sizeOld&&j(),m.sizeOld=m.actualSize,setTimeout(g,l.responsiveCheckTime))}function h(){n.data("sbi_imgLiquid_error",!0),m.addClass("sbi_imgLiquid_error"),l.onItemError&&l.onItemError(c,m,n),k()}function i(){var a={};if(e.settings.useDataHtmlAttr){var c=m.attr("data-sbi_imgLiquid-fill"),d=m.attr("data-sbi_imgLiquid-horizontalAlign"),f=m.attr("data-sbi_imgLiquid-verticalAlign");("true"===c||"false"===c)&&(a.fill=Boolean("true"===c)),void 0===d||"left"!==d&&"center"!==d&&"right"!==d&&-1===d.indexOf("%")||(a.horizontalAlign=d),void 0===f||"top"!==f&&"bottom"!==f&&"center"!==f&&-1===f.indexOf("%")||(a.verticalAlign=f)}return b.isIE&&e.settings.ieFadeInDisabled&&(a.fadeInTime=0),a}function j(){var a,b,d,e,f,g,h,i,j=0,o=0,p=m.width(),q=m.height();void 0===n.data("owidth")&&n.data("owidth",n[0].width),void 0===n.data("oheight")&&n.data("oheight",n[0].height),l.fill===p/q>=n.data("owidth")/n.data("oheight")?(a="100%",b="auto",d=Math.floor(p),e=Math.floor(p*(n.data("oheight")/n.data("owidth")))):(a="auto",b="100%",d=Math.floor(q*(n.data("owidth")/n.data("oheight"))),e=Math.floor(q)),f=l.horizontalAlign.toLowerCase(),h=p-d,"left"===f&&(o=0),"center"===f&&(o=.5*h),"right"===f&&(o=h),-1!==f.indexOf("%")&&(f=parseInt(f.replace("%",""),10),f>0&&(o=h*f*.01)),g=l.verticalAlign.toLowerCase(),i=q-e,"left"===g&&(j=0),"center"===g&&(j=.5*i),"bottom"===g&&(j=i),-1!==g.indexOf("%")&&(g=parseInt(g.replace("%",""),10),g>0&&(j=i*g*.01)),l.hardPixels&&(a=d,b=e),n.css({width:a,height:b,"margin-left":Math.floor(o),"margin-top":Math.floor(j)}),n.data("sbi_imgLiquid_oldProcessed")||(n.fadeTo(l.fadeInTime,1),n.data("sbi_imgLiquid_oldProcessed",!0),l.removeBoxBackground&&m.css("background-image","none"),m.addClass("sbi_imgLiquid_nobgSize"),m.addClass("sbi_imgLiquid_ready")),l.onItemFinish&&l.onItemFinish(c,m,n),k()}function k(){c===e.length-1&&e.settings.onFinish&&e.settings.onFinish()}var l=e.settings,m=a(this),n=a("img:first",m);return n.length?(n.data("sbi_imgLiquid_settings")?(m.removeClass("sbi_imgLiquid_error").removeClass("sbi_imgLiquid_ready"),l=a.extend({},n.data("sbi_imgLiquid_settings"),e.options)):l=a.extend({},e.settings,i()),n.data("sbi_imgLiquid_settings",l),l.onItemStart&&l.onItemStart(c,m,n),void(b.bgs_Available&&l.useBackgroundSize?d():f())):void h()})}})}(jQuery),!function(){var a=b.injectCss,c=document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a)),c.appendChild(d)}(),a.find(".sbi_photo").sbi_imgLiquid({fill:!0})}var f=function(){var a=0;return function(b,c){clearTimeout(a),a=setTimeout(b,c)}}();jQuery(window).resize(function(){f(function(){h()},500)}),h(),!function(a){var b={callback:function(){},runOnLoad:!0,frequency:100,sbiPreviousVisibility:null},c={};c.sbiCheckVisibility=function(a,b){if(jQuery.contains(document,a[0])){var d=b.sbiPreviousVisibility,e=a.is(":visible");b.sbiPreviousVisibility=e,null==d?b.runOnLoad&&b.callback(a,e):d!==e&&b.callback(a,e),setTimeout(function(){c.sbiCheckVisibility(a,b)},b.frequency)}},a.fn.sbiVisibilityChanged=function(d){var e=a.extend({},b,d);return this.each(function(){c.sbiCheckVisibility(a(this),e)})}}(jQuery),jQuery(".sbi").filter(":hidden").sbiVisibilityChanged({callback:function(a,b){h()},runOnLoad:!1}),jQuery("#sb_instagram .sbi_photo").each(function(){$sbi_photo=jQuery(this),$sbi_photo.hover(function(){jQuery(this).fadeTo(200,.85)},function(){jQuery(this).stop().fadeTo(500,1)}),$sbi_photo.closest(".sbi_item").hasClass("sbi_type_video")&&($sbi_photo.find(".sbi_playbtn").length||$sbi_photo.append('<i class="fa fa-play sbi_playbtn"></i>'))}),a.find("#sbi_images .sbi_item.sbi_new").sort(function(a,b){var c=jQuery(a).data("date"),d=jQuery(b).data("date");return"none"==i?d-c:Math.round(Math.random())-.5}).appendTo(a.find("#sbi_images")),setTimeout(function(){jQuery("#sbi_images .sbi_item.sbi_new").removeClass("sbi_new"),m=[]},500),j()},error:function(a){var b="",c="";a.indexOf("access_token")>-1?(b+="<p><b>Error: Access Token is not valid</b><br /><span>This error message is only visible to WordPress admins</span>",c="<p>There's an issue with the Instagram Access Token that you are using. Please obtain a new Access Token on the plugin's Settings page.<br />If you continue to have an issue with your Access Token then please see <a href='https://smashballoon.com/my-instagram-access-token-keep-expiring/' target='_blank'>this FAQ</a> for more information."):a.indexOf("user does not exist")>-1&&(b+="<p><b>Error: The User ID does not exist</b><br /><span>This error is only visible to WordPress admins</span>",c="<p>Please double check the Instagram User ID that you are using. To find your User ID simply enter your Instagram user name into this <a href='http://www.otzberg.net/iguserid/' target='_blank'>tool</a>.</p>"),r.length<2&&jQuery("#sb_instagram").empty().append('<p style="text-align: center;">Unable to show Instagram photos</p><div id="sbi_mod_error">'+b+c+"</div>")}});c.click(function(){l.next()}),l.run()})})}var sbi_js_exists="undefined"!=typeof sbi_js_exists;sbi_js_exists||(function(){var a,b;a=function(){function a(a,b){var c,d;if(this.options={target:"instafeed",get:"popular",resolution:"thumbnail",sortBy:"none",links:!0,mock:!1,useHttp:!1},"object"==typeof a)for(c in a)d=a[c],this.options[c]=d;this.context=null!=b?b:this,this.unique=this._genKey()}return a.prototype.hasNext=function(){return"string"==typeof this.context.nextUrl&&this.context.nextUrl.length>0},a.prototype.next=function(){return!!this.hasNext()&&this.run(this.context.nextUrl)},a.prototype.run=function(b){var c,d,e;if("string"!=typeof this.options.clientId&&"string"!=typeof this.options.accessToken)throw new Error("Missing clientId or accessToken.");if("string"!=typeof this.options.accessToken&&"string"!=typeof this.options.clientId)throw new Error("Missing clientId or accessToken.");return null!=this.options.before&&"function"==typeof this.options.before&&this.options.before.call(this),"undefined"!=typeof document&&null!==document&&(e=document.createElement("script"),e.id="instafeed-fetcher",e.src=b||this._buildUrl(),c=document.getElementsByTagName("head"),c[0].appendChild(e),d="instafeedCache"+this.unique,window[d]=new a(this.options,this),window[d].unique=this.unique),!0},a.prototype.parse=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if("object"!=typeof a){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"Invalid JSON data"),!1;throw new Error("Invalid JSON response")}if(200!==a.meta.code){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,a.meta.error_message),!1;throw new Error("Error from Instagram: "+a.meta.error_message)}if(0===a.data.length){if(null!=this.options.error&&"function"==typeof this.options.error)return this.options.error.call(this,"No images were returned from Instagram"),!1;throw new Error("No images were returned from Instagram")}if(null!=this.options.success&&"function"==typeof this.options.success&&this.options.success.call(this,a),this.context.nextUrl="",null!=a.pagination&&(this.context.nextUrl=a.pagination.next_url),"none"!==this.options.sortBy)switch(o="random"===this.options.sortBy?["","random"]:this.options.sortBy.split("-"),n="least"===o[0],o[1]){case"random":a.data.sort(function(){return.5-Math.random()});break;case"recent":a.data=this._sortBy(a.data,"created_time",n);break;case"liked":a.data=this._sortBy(a.data,"likes.count",n);break;case"commented":a.data=this._sortBy(a.data,"comments.count",n);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.")}if("undefined"!=typeof document&&null!==document&&this.options.mock===!1){if(i=a.data,null!=this.options.limit&&i.length>this.options.limit&&(i=i.slice(0,this.options.limit+1||9e9)),c=document.createDocumentFragment(),null!=this.options.filter&&"function"==typeof this.options.filter&&(i=this._filter(i,this.options.filter)),null!=this.options.template&&"string"==typeof this.options.template){for(e="",g="",k="",p=document.createElement("div"),q=0,t=i.length;q<t;q++)f=i[q],h=f.images[this.options.resolution].url,this.options.useHttp||(h=h.replace("http://","//")),g=this._makeTemplate(this.options.template,{model:f,id:f.id,link:f.link,image:h,caption:this._getObjectProperty(f,"caption.text"),likes:f.likes.count,comments:f.comments.count,location:this._getObjectProperty(f,"location.name")}),e+=g;for(p.innerHTML=e,w=[].slice.call(p.childNodes),r=0,u=w.length;r<u;r++)m=w[r],c.appendChild(m)}else for(s=0,v=i.length;s<v;s++)f=i[s],j=document.createElement("img"),h=f.images[this.options.resolution].url,this.options.useHttp||(h=h.replace("http://","//")),j.src=h,this.options.links===!0?(b=document.createElement("a"),b.href=f.link,b.appendChild(j),c.appendChild(b)):c.appendChild(j);this.options.target.append(c),d=document.getElementsByTagName("head")[0],d.removeChild(document.getElementById("instafeed-fetcher")),l="instafeedCache"+this.unique,window[l]=void 0;try{delete window[l]}catch(a){}}return null!=this.options.after&&"function"==typeof this.options.after&&this.options.after.call(this),!0},a.prototype._buildUrl=function(){var a,b,c;switch(a="https://api.instagram.com/v1",this.options.get){case"popular":b="media/popular";break;case"tagged":if("string"!=typeof this.options.tagName)throw new Error("No tag name specified. Use the 'tagName' option.");b="tags/"+this.options.tagName+"/media/recent";break;case"location":if("number"!=typeof this.options.locationId)throw new Error("No location specified. Use the 'locationId' option.");b="locations/"+this.options.locationId+"/media/recent";break;case"user":if("number"!=typeof this.options.userId)throw new Error("No user specified. Use the 'userId' option.");if("string"!=typeof this.options.accessToken)throw new Error("No access token. Use the 'accessToken' option.");b="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.")}return c=""+a+"/"+b,c+=null!=this.options.accessToken?"?access_token="+this.options.accessToken:"?client_id="+this.options.clientId,null!=this.options.limit&&(c+="&count="+this.options.limit),c+="&callback=instafeedCache"+this.unique+".parse"},a.prototype._genKey=function(){var a;return a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},""+a()+a()+a()+a()},a.prototype._makeTemplate=function(a,b){var c,d,e,f,g;for(d=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/,c=a;d.test(c);)e=c.match(d)[1],f=null!=(g=this._getObjectProperty(b,e))?g:"",c=c.replace(d,""+f);return c},a.prototype._getObjectProperty=function(a,b){var c,d;for(b=b.replace(/\[(\w+)\]/g,".$1"),d=b.split(".");d.length;){if(c=d.shift(),!(null!=a&&c in a))return null;a=a[c]}return a},a.prototype._sortBy=function(a,b,c){var d;return d=function(a,d){var e,f;return e=this._getObjectProperty(a,b),f=this._getObjectProperty(d,b),c?e>f?1:-1:e<f?1:-1},a.sort(d.bind(this)),a},a.prototype._filter=function(a,b){var c,d,e,f,g;for(c=[],e=function(a){if(b(a))return c.push(a)},f=0,g=a.length;f<g;f++)d=a[f],e(d);return c},a}(),b="undefined"!=typeof exports&&null!==exports?exports:window,b.instagramfeed=a}.call(this),function(){"use strict";var a=Array.prototype.slice;try{a.call(document.documentElement)}catch(b){Array.prototype.slice=function(b,c){if(c="undefined"!=typeof c?c:this.length,"[object Array]"===Object.prototype.toString.call(this))return a.call(this,b,c);var d,f,e=[],g=this.length,h=b||0;h=h>=0?h:g+h;var i=c?c:g;if(c<0&&(i=g+c),f=i-h,f>0)if(e=new Array(f),this.charAt)for(d=0;d<f;d++)e[d]=this.charAt(h+d);else for(d=0;d<f;d++)e[d]=this[h+d];return e}}}(),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),jQuery(document).ready(function(){sbi_init()}));